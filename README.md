# Auth Test Task - выполненное тестовое задание на создание системы аутентификации и авторизации

## Описание

Бэкенд-приложение реализует собственную систему аутентификации и авторизации, не ограничиваясь стандартными решениями фреймворков. Основная задача — спроектировать и реализовать схему контроля доступа, включая структуру базы данных для хранения правил доступа и разрешённых действий пользователей.

## Основные возможности

### 1. Работа с пользователями

- **Регистрация:** Имя, email, пароль (с подтверждением).
- **Редактирование профиля:** Возможность изменить данные.
- **Мягкое удаление:** Пользователь может удалить аккаунт (is_active=False), выйти из системы и не сможет войти снова, но данные сохраняются в базе.
- **Вход/выход:** Аутентификация по email и паролю, идентификация пользователя в последующих запросах.

### 2. Система контроля доступа

- Своя схема хранения ограничений доступа.
- Таблицы для ролей, бизнес-элементов и правил доступа.
- API для просмотра и изменения правил (только для администратора).
- Обработка ошибок:
  - `401 Unauthorized` — пользователь не идентифицирован.
  - `403 Forbidden` — недостаточно прав для доступа.

### 3. Бизнес-объекты

- Моковые представления для демонстрации объектов (без таблиц в БД).
- Возврат списков объектов или ошибок доступа.

## Технологии

- FastAPI + PostgreSQL (рекомендовано)
- bcrypt для паролей
- PyJWT для токенов
- Redis для refresh токенов (через куки)

## Структура базы данных

- **users:** Пользователи (id, is_active, role, name, created_at, email, password)
- **posts:** Посты (id, created_at, content, user_id)
- **comments:** Комментарии (id, created_at, content, user_id, post_id)
- **role_rules:** Правила доступа для ролей и объектов (role, object_type, action, allowed)
